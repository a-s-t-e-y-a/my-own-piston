#!/usr/bin/env bash

# Put instructions to run the runtime with JSON support
if [ ! -f $1.class ]; then
    # If not compiled yet, compile first
    if [[ $1 != *.java ]]; then
        mv $1 $1.java
    fi
    javac -cp "/usr/share/java/*:$PISTON_PKGDIR/lib/json/*:." $1
fi
# Run the class, assuming the class name matches the file name without extension
classname=$(basename "$1" .java)
java -cp "/usr/share/java/*:$PISTON_PKGDIR/lib/json/*:." $classname "$@"